{
 "Resources": {
  "MyCfnEIP": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/MyCfnEIP"
   }
  },
  "MyCfnNatGateway": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "MyCfnEIP",
      "AllocationId"
     ]
    },
    "SubnetId": "subnet-0d753b76d128abe1f"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/MyCfnNatGateway"
   }
  },
  "PrivateRouteTable0": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRouteTable0"
   }
  },
  "PrivateRoute0": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "MyCfnNatGateway"
    },
    "RouteTableId": {
     "Ref": "PrivateRouteTable0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRoute0"
   }
  },
  "SubnetRouteTableAssociation0": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "PrivateRouteTable0"
    },
    "SubnetId": "subnet-0c2283da7ffab1df2"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SubnetRouteTableAssociation0"
   }
  },
  "PrivateRouteTable1": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRouteTable1"
   }
  },
  "PrivateRoute1": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "MyCfnNatGateway"
    },
    "RouteTableId": {
     "Ref": "PrivateRouteTable1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRoute1"
   }
  },
  "SubnetRouteTableAssociation1": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "PrivateRouteTable1"
    },
    "SubnetId": "subnet-0cff5a0113ea24898"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SubnetRouteTableAssociation1"
   }
  },
  "Users0A0EEA89": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "UserName",
      "AttributeType": "S"
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "UserName",
      "KeyType": "HASH"
     }
    ],
    "ProvisionedThroughput": {
     "ReadCapacityUnits": 1,
     "WriteCapacityUnits": 1
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/Users/Resource"
   }
  },
  "ImageStorage82E68681": {
   "Type": "AWS::S3::Bucket",
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageStorage/Resource"
   }
  },
  "ImageStoragePolicy8AD6DC86": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "ImageStorage82E68681"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:DeleteObject",
        "s3:Get*",
        "s3:List*",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": "arn:aws:iam::361602391862:role/LabRole"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "ImageStorage82E68681",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ImageStorage82E68681",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageStorage/Policy/Resource"
   }
  },
  "ImageStorageNotifications61C33B66": {
   "Type": "Custom::S3BucketNotifications",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "ImageStorage82E68681"
    },
    "NotificationConfiguration": {
     "LambdaFunctionConfigurations": [
      {
       "Events": [
        "s3:ObjectCreated:*"
       ],
       "LambdaFunctionArn": {
        "Fn::GetAtt": [
         "UpdateProfilePictureFunction78295F9B",
         "Arn"
        ]
       }
      }
     ]
    },
    "Managed": true
   },
   "DependsOn": [
    "ImageStorageAllowBucketNotificationsToSocialNetworkCdkStackUpdateProfilePictureFunction77137028B355E236",
    "ImageStoragePolicy8AD6DC86"
   ],
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageStorage/Notifications/Resource"
   }
  },
  "ImageStorageAllowBucketNotificationsToSocialNetworkCdkStackUpdateProfilePictureFunction77137028B355E236": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "UpdateProfilePictureFunction78295F9B",
      "Arn"
     ]
    },
    "Principal": "s3.amazonaws.com",
    "SourceAccount": "361602391862",
    "SourceArn": {
     "Fn::GetAtt": [
      "ImageStorage82E68681",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageStorage/AllowBucketNotificationsToSocialNetworkCdkStackUpdateProfilePictureFunction77137028"
   }
  },
  "PostsStorage00A69DB4": {
   "Type": "AWS::S3::Bucket",
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PostsStorage/Resource"
   }
  },
  "PostsStoragePolicyD26864C8": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "PostsStorage00A69DB4"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:DeleteObject",
        "s3:Get*",
        "s3:List*",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": "arn:aws:iam::361602391862:role/LabRole"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "PostsStorage00A69DB4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "PostsStorage00A69DB4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PostsStorage/Policy/Resource"
   }
  },
  "PostsStorageNotificationsACCA9B1E": {
   "Type": "Custom::S3BucketNotifications",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "PostsStorage00A69DB4"
    },
    "NotificationConfiguration": {
     "QueueConfigurations": [
      {
       "Events": [
        "s3:ObjectCreated:*"
       ],
       "QueueArn": {
        "Fn::GetAtt": [
         "ImageUploadQueue828B2CCD",
         "Arn"
        ]
       }
      }
     ]
    },
    "Managed": true
   },
   "DependsOn": [
    "ImageUploadQueuePolicy68CD3164",
    "ImageUploadQueue828B2CCD",
    "PostsStoragePolicyD26864C8"
   ],
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PostsStorage/Notifications/Resource"
   }
  },
  "ImageUploadQueue828B2CCD": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "VisibilityTimeout": 300
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageUploadQueue/Resource"
   }
  },
  "ImageUploadQueuePolicy68CD3164": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl",
        "sqs:SendMessage"
       ],
       "Condition": {
        "ArnLike": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "PostsStorage00A69DB4",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "s3.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "ImageUploadQueue828B2CCD",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "ImageUploadQueue828B2CCD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageUploadQueue/Policy/Resource"
   }
  },
  "TextractResultQueue3C564822": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "VisibilityTimeout": 300
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/TextractResultQueue/Resource"
   }
  },
  "RegistrationFunctionSecurityGroupCD7EC9F0": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackRegistrationFunctionDE74C79D",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/RegistrationFunction/SecurityGroup/Resource"
   }
  },
  "RegistrationFunction288DEDD6": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "2236996cddb405468735dcc5af8d18555118cff4c25bedbf986038c6b4309890.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "RegistrationFunctionSecurityGroupCD7EC9F0",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/RegistrationFunction/Resource",
    "aws:asset:path": "asset.2236996cddb405468735dcc5af8d18555118cff4c25bedbf986038c6b4309890",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetUserFunctionSecurityGroup60A0385C": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackGetUserFunction0262B3CB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetUserFunction/SecurityGroup/Resource"
   }
  },
  "GetUserFunctionD3D353B4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "3800c0ab7cd8a2c911e586329cea3ce2426e51f5872d627a609b2d2bc1933a2e.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "GetUserFunctionSecurityGroup60A0385C",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetUserFunction/Resource",
    "aws:asset:path": "asset.3800c0ab7cd8a2c911e586329cea3ce2426e51f5872d627a609b2d2bc1933a2e",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DeleteUserFunctionSecurityGroup59DF1809": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackDeleteUserFunction0648D5FB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/DeleteUserFunction/SecurityGroup/Resource"
   }
  },
  "DeleteUserFunctionF8A542EC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "12d7f1eb394d52de77e1961940b6245616321a7223432b8195a74dde9d159008.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "DeleteUserFunctionSecurityGroup59DF1809",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/DeleteUserFunction/Resource",
    "aws:asset:path": "asset.12d7f1eb394d52de77e1961940b6245616321a7223432b8195a74dde9d159008",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetPresignUrlForUplodingProfileImageSecurityGroupB0759402": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackGetPresignUrlForUplodingProfileImageAF8CF15D",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingProfileImage/SecurityGroup/Resource"
   }
  },
  "GetPresignUrlForUplodingProfileImageA0888C75": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "bf92ac1b08790a0ef378740bd8c17fded76fd7b796141ce5b3cd3b51c43e0662.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "GetPresignUrlForUplodingProfileImageSecurityGroupB0759402",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingProfileImage/Resource",
    "aws:asset:path": "asset.bf92ac1b08790a0ef378740bd8c17fded76fd7b796141ce5b3cd3b51c43e0662",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetPresignUrlForUplodingPostImageSecurityGroup3B8E0C37": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackGetPresignUrlForUplodingPostImage3746C0B6",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingPostImage/SecurityGroup/Resource"
   }
  },
  "GetPresignUrlForUplodingPostImageC1B733B4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "76e1b851d287ef36d598463179121b74a60050add78942d2f124adc05baff250.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "PostsStorage00A69DB4"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "GetPresignUrlForUplodingPostImageSecurityGroup3B8E0C37",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingPostImage/Resource",
    "aws:asset:path": "asset.76e1b851d287ef36d598463179121b74a60050add78942d2f124adc05baff250",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "SocialNetworkApiACB67AB1": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Name": "Social Network Service"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Resource"
   }
  },
  "SocialNetworkApiDeploymentA74B3F222ece8e00d9fbf4060331eaebd605127f": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Automatically created by the RestApi construct",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "DependsOn": [
    "SocialNetworkApideleteUserDELETE3193D5E6",
    "SocialNetworkApideleteUserCFD79263",
    "SocialNetworkApigetPresignUrlForUplodingPostImageGET97DC1964",
    "SocialNetworkApigetPresignUrlForUplodingPostImageD0895DD3",
    "SocialNetworkApigetPresignUrlForUplodingProfileImageGET263376DB",
    "SocialNetworkApigetPresignUrlForUplodingProfileImageECBD9743",
    "SocialNetworkApigetUserGETEF6541CD",
    "SocialNetworkApigetUser1CD8563F",
    "SocialNetworkApiregistrationPOST127123FF",
    "SocialNetworkApiregistration36768A6D"
   ],
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Deployment/Resource"
   }
  },
  "SocialNetworkApiDeploymentStageprod4C6E8575": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "SocialNetworkApiDeploymentA74B3F222ece8e00d9fbf4060331eaebd605127f"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/DeploymentStage.prod/Resource"
   }
  },
  "SocialNetworkApiregistration36768A6D": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "registration",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/Resource"
   }
  },
  "SocialNetworkApiregistrationPOSTApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9POSTregistration1B009A35": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RegistrationFunction288DEDD6",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/POST/registration"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/POST/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.POST..registration"
   }
  },
  "SocialNetworkApiregistrationPOSTApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9POSTregistration7F04FAE1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RegistrationFunction288DEDD6",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/POST/registration"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/POST/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.POST..registration"
   }
  },
  "SocialNetworkApiregistrationPOST127123FF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RegistrationFunction288DEDD6",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApiregistration36768A6D"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/POST/Resource"
   }
  },
  "SocialNetworkApigetUser1CD8563F": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "getUser",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/Resource"
   }
  },
  "SocialNetworkApigetUserGETApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetUser0B73CDFA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetUserFunctionD3D353B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/GET/getUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/GET/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getUser"
   }
  },
  "SocialNetworkApigetUserGETApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetUser3AFBE9FB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetUserFunctionD3D353B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/GET/getUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/GET/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getUser"
   }
  },
  "SocialNetworkApigetUserGETEF6541CD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetUserFunctionD3D353B4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApigetUser1CD8563F"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/GET/Resource"
   }
  },
  "SocialNetworkApideleteUserCFD79263": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "deleteUser",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/Resource"
   }
  },
  "SocialNetworkApideleteUserDELETEApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9DELETEdeleteUser4FEA608B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserFunctionF8A542EC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/DELETE/deleteUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/DELETE/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.DELETE..deleteUser"
   }
  },
  "SocialNetworkApideleteUserDELETEApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9DELETEdeleteUser56021C79": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserFunctionF8A542EC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/DELETE/deleteUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/DELETE/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.DELETE..deleteUser"
   }
  },
  "SocialNetworkApideleteUserDELETE3193D5E6": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteUserFunctionF8A542EC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApideleteUserCFD79263"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/DELETE/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageECBD9743": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "getPresignUrlForUplodingProfileImage",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageGETApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingProfileImage62CB0C98": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingProfileImageA0888C75",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/GET/getPresignUrlForUplodingProfileImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/GET/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingProfileImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageGETApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingProfileImage6D55DC21": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingProfileImageA0888C75",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/GET/getPresignUrlForUplodingProfileImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/GET/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingProfileImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageGET263376DB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetPresignUrlForUplodingProfileImageA0888C75",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApigetPresignUrlForUplodingProfileImageECBD9743"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/GET/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageD0895DD3": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "getPresignUrlForUplodingPostImage",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageGETApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingPostImage793BC119": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingPostImageC1B733B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/GET/getPresignUrlForUplodingPostImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/GET/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingPostImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageGETApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingPostImage85BD1A3D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingPostImageC1B733B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/GET/getPresignUrlForUplodingPostImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/GET/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingPostImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageGET97DC1964": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetPresignUrlForUplodingPostImageC1B733B4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApigetPresignUrlForUplodingPostImageD0895DD3"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/GET/Resource"
   }
  },
  "UpdateProfilePictureFunctionSecurityGroupE88B9621": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackUpdateProfilePictureFunction77137028",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/UpdateProfilePictureFunction/SecurityGroup/Resource"
   }
  },
  "UpdateProfilePictureFunction78295F9B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "dae2820c432b0c58ef3702dab036e794ed19a2fa9ef0171daec76b55df03c84f.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "UpdateProfilePictureFunctionSecurityGroupE88B9621",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/UpdateProfilePictureFunction/Resource",
    "aws:asset:path": "asset.dae2820c432b0c58ef3702dab036e794ed19a2fa9ef0171daec76b55df03c84f",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Description": "AWS CloudFormation handler for \"Custom::S3BucketNotifications\" resources (@aws-cdk/aws-s3)",
    "Code": {
     "ZipFile": "import boto3  # type: ignore\nimport json\nimport logging\nimport urllib.request\n\ns3 = boto3.client(\"s3\")\n\nEVENTBRIDGE_CONFIGURATION = 'EventBridgeConfiguration'\nCONFIGURATION_TYPES = [\"TopicConfigurations\", \"QueueConfigurations\", \"LambdaFunctionConfigurations\"]\n\ndef handler(event: dict, context):\n  response_status = \"SUCCESS\"\n  error_message = \"\"\n  try:\n    props = event[\"ResourceProperties\"]\n    notification_configuration = props[\"NotificationConfiguration\"]\n    managed = props.get('Managed', 'true').lower() == 'true'\n    stack_id = event['StackId']\n    old = event.get(\"OldResourceProperties\", {}).get(\"NotificationConfiguration\", {})\n    if managed:\n      config = handle_managed(event[\"RequestType\"], notification_configuration)\n    else:\n      config = handle_unmanaged(props[\"BucketName\"], stack_id, event[\"RequestType\"], notification_configuration, old)\n    s3.put_bucket_notification_configuration(Bucket=props[\"BucketName\"], NotificationConfiguration=config)\n  except Exception as e:\n    logging.exception(\"Failed to put bucket notification configuration\")\n    response_status = \"FAILED\"\n    error_message = f\"Error: {str(e)}. \"\n  finally:\n    submit_response(event, context, response_status, error_message)\n\ndef handle_managed(request_type, notification_configuration):\n  if request_type == 'Delete':\n    return {}\n  return notification_configuration\n\ndef handle_unmanaged(bucket, stack_id, request_type, notification_configuration, old):\n  def with_id(n):\n    n['Id'] = f\"{stack_id}-{hash(json.dumps(n, sort_keys=True))}\"\n    return n\n\n  external_notifications = {}\n  existing_notifications = s3.get_bucket_notification_configuration(Bucket=bucket)\n  for t in CONFIGURATION_TYPES:\n    if request_type == 'Update':\n        ids = [with_id(n) for n in old.get(t, [])]\n        old_incoming_ids = [n['Id'] for n in ids]\n        external_notifications[t] = [n for n in existing_notifications.get(t, []) if not n['Id'] in old_incoming_ids]\n    elif request_type == 'Delete':\n        external_notifications[t] = [n for n in existing_notifications.get(t, []) if not n['Id'].startswith(f\"{stack_id}-\")]\n    elif request_type == 'Create':\n        external_notifications[t] = [n for n in existing_notifications.get(t, [])]\n  if EVENTBRIDGE_CONFIGURATION in existing_notifications:\n    external_notifications[EVENTBRIDGE_CONFIGURATION] = existing_notifications[EVENTBRIDGE_CONFIGURATION]\n\n  if request_type == 'Delete':\n    return external_notifications\n\n  notifications = {}\n  for t in CONFIGURATION_TYPES:\n    external = external_notifications.get(t, [])\n    incoming = [with_id(n) for n in notification_configuration.get(t, [])]\n    notifications[t] = external + incoming\n\n  if EVENTBRIDGE_CONFIGURATION in notification_configuration:\n    notifications[EVENTBRIDGE_CONFIGURATION] = notification_configuration[EVENTBRIDGE_CONFIGURATION]\n  elif EVENTBRIDGE_CONFIGURATION in external_notifications:\n    notifications[EVENTBRIDGE_CONFIGURATION] = external_notifications[EVENTBRIDGE_CONFIGURATION]\n\n  return notifications\n\ndef submit_response(event: dict, context, response_status: str, error_message: str):\n  response_body = json.dumps(\n    {\n      \"Status\": response_status,\n      \"Reason\": f\"{error_message}See the details in CloudWatch Log Stream: {context.log_stream_name}\",\n      \"PhysicalResourceId\": event.get(\"PhysicalResourceId\") or event[\"LogicalResourceId\"],\n      \"StackId\": event[\"StackId\"],\n      \"RequestId\": event[\"RequestId\"],\n      \"LogicalResourceId\": event[\"LogicalResourceId\"],\n      \"NoEcho\": False,\n    }\n  ).encode(\"utf-8\")\n  headers = {\"content-type\": \"\", \"content-length\": str(len(response_body))}\n  try:\n    req = urllib.request.Request(url=event[\"ResponseURL\"], headers=headers, data=response_body, method=\"PUT\")\n    with urllib.request.urlopen(req) as response:\n      print(response.read().decode(\"utf-8\"))\n    print(\"Status code: \" + response.reason)\n  except Exception as e:\n      print(\"send(..) failed executing request.urlopen(..): \" + str(e))\n"
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "python3.11",
    "Timeout": 300
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource"
   }
  },
  "TextractFunction6DF7C8EE": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "2bc78a1022fbe15d9283a1e4bf1e9f60486794d49d1797c046ff76049a95d64e.zip"
    },
    "Environment": {
     "Variables": {
      "BUCKET_NAME": {
       "Ref": "PostsStorage00A69DB4"
      },
      "OUTPUT_QUEUE_URL": {
       "Ref": "TextractResultQueue3C564822"
      }
     }
    },
    "Handler": "textract.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/TextractFunction/Resource",
    "aws:asset:path": "asset.2bc78a1022fbe15d9283a1e4bf1e9f60486794d49d1797c046ff76049a95d64e",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "TextractFunctionSqsEventSourceSocialNetworkCdkStackImageUploadQueueD2C5024A58297646": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "EventSourceArn": {
     "Fn::GetAtt": [
      "ImageUploadQueue828B2CCD",
      "Arn"
     ]
    },
    "FunctionName": {
     "Ref": "TextractFunction6DF7C8EE"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/TextractFunction/SqsEventSource:SocialNetworkCdkStackImageUploadQueueD2C5024A/Resource"
   }
  },
  "S3SendMessagePolicy": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Version": "2012-10-17",
     "Id": {
      "Fn::Join": [
       "",
       [
        {
         "Fn::GetAtt": [
          "ImageUploadQueue828B2CCD",
          "Arn"
         ]
        },
        "/SQSDefaultPolicy"
       ]
      ]
     },
     "Statement": [
      {
       "Sid": "example-statement-ID",
       "Effect": "Allow",
       "Principal": {
        "AWS": "*"
       },
       "Action": "SQS:SendMessage",
       "Resource": {
        "Fn::GetAtt": [
         "ImageUploadQueue828B2CCD",
         "Arn"
        ]
       },
       "Condition": {
        "ArnLike": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "PostsStorage00A69DB4",
           "Arn"
          ]
         }
        }
       }
      }
     ]
    },
    "Queues": [
     {
      "Ref": "ImageUploadQueue828B2CCD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/S3SendMessagePolicy"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/2VRTW/CMAz9LdxDBuzjDh1DO7AxujtyU5cF2qSrHVBV9b9PSRhl2iV+7zmy3rNncvrwJCcjONNY5cdxqTPZpQzqKLZI1jUKBZxp16GayS4pzPJ1I5LCvAGvgPEMrWdb6xg/ISvxyjxIXWaQh+acyCoNrK0RKSrXaG5XjXV1+Hwr9CJvDVQ2z2R3nRtAL+hedgunjshevKBYNrbUqh3kC49kAYS9KKHKcghRNthUmsi7eXFGBVtJYa54eULDadjBGupam71v/1d7Qd8kuw+HLviMILyDoRvqI+yACJnk3BcBtd7Hbcpui8TzWodFXuAz1qVtKzQh8Q1LGfZx0wH8XswnHc4XB0W8Rv6yuZci6vs/7aQw745rxyL48lNDPmNzlAe6O80mcvoop6MDaT1unGFdodzG+gMi+o/pSwIAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ImageStorageOutput": {
   "Value": {
    "Ref": "ImageStorage82E68681"
   }
  },
  "PostsStorageOutput": {
   "Value": {
    "Ref": "PostsStorage00A69DB4"
   }
  },
  "SocialNetworkApiEndpointE7682DC6": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "SocialNetworkApiACB67AB1"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
      },
      "/"
     ]
    ]
   }
  },
  "ApiUrl": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "SocialNetworkApiACB67AB1"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "SocialNetworkApiUrl"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}