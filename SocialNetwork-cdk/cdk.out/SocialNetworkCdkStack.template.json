{
 "Resources": {
  "MyCfnEIP": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/MyCfnEIP"
   }
  },
  "MyCfnNatGateway": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "MyCfnEIP",
      "AllocationId"
     ]
    },
    "SubnetId": "subnet-0d753b76d128abe1f"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/MyCfnNatGateway"
   }
  },
  "PrivateRouteTable0": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRouteTable0"
   }
  },
  "PrivateRoute0": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "MyCfnNatGateway"
    },
    "RouteTableId": {
     "Ref": "PrivateRouteTable0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRoute0"
   }
  },
  "SubnetRouteTableAssociation0": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "PrivateRouteTable0"
    },
    "SubnetId": "subnet-0c2283da7ffab1df2"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SubnetRouteTableAssociation0"
   }
  },
  "PrivateRouteTable1": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRouteTable1"
   }
  },
  "PrivateRoute1": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "MyCfnNatGateway"
    },
    "RouteTableId": {
     "Ref": "PrivateRouteTable1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PrivateRoute1"
   }
  },
  "SubnetRouteTableAssociation1": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "PrivateRouteTable1"
    },
    "SubnetId": "subnet-0cff5a0113ea24898"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SubnetRouteTableAssociation1"
   }
  },
  "Users0A0EEA89": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "UserName",
      "AttributeType": "S"
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "UserName",
      "KeyType": "HASH"
     }
    ],
    "ProvisionedThroughput": {
     "ReadCapacityUnits": 1,
     "WriteCapacityUnits": 1
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/Users/Resource"
   }
  },
  "ImageStorage82E68681": {
   "Type": "AWS::S3::Bucket",
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageStorage/Resource"
   }
  },
  "ImageStoragePolicy8AD6DC86": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "ImageStorage82E68681"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:DeleteObject",
        "s3:Get*",
        "s3:List*",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": "arn:aws:iam::361602391862:role/LabRole"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "ImageStorage82E68681",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ImageStorage82E68681",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageStorage/Policy/Resource"
   }
  },
  "PostsStorage00A69DB4": {
   "Type": "AWS::S3::Bucket",
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PostsStorage/Resource"
   }
  },
  "PostsStoragePolicyD26864C8": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "PostsStorage00A69DB4"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:DeleteObject",
        "s3:Get*",
        "s3:List*",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": "arn:aws:iam::361602391862:role/LabRole"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "PostsStorage00A69DB4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "PostsStorage00A69DB4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/PostsStorage/Policy/Resource"
   }
  },
  "ImageUploadQueue828B2CCD": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "VisibilityTimeout": 300
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/ImageUploadQueue/Resource"
   }
  },
  "TextractResultQueue3C564822": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "VisibilityTimeout": 300
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/TextractResultQueue/Resource"
   }
  },
  "RegistrationFunctionSecurityGroupCD7EC9F0": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackRegistrationFunctionDE74C79D",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/RegistrationFunction/SecurityGroup/Resource"
   }
  },
  "RegistrationFunction288DEDD6": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "2236996cddb405468735dcc5af8d18555118cff4c25bedbf986038c6b4309890.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "RegistrationFunctionSecurityGroupCD7EC9F0",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/RegistrationFunction/Resource",
    "aws:asset:path": "asset.2236996cddb405468735dcc5af8d18555118cff4c25bedbf986038c6b4309890",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetUserFunctionSecurityGroup60A0385C": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackGetUserFunction0262B3CB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetUserFunction/SecurityGroup/Resource"
   }
  },
  "GetUserFunctionD3D353B4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "3800c0ab7cd8a2c911e586329cea3ce2426e51f5872d627a609b2d2bc1933a2e.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "GetUserFunctionSecurityGroup60A0385C",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetUserFunction/Resource",
    "aws:asset:path": "asset.3800c0ab7cd8a2c911e586329cea3ce2426e51f5872d627a609b2d2bc1933a2e",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DeleteUserFunctionSecurityGroup59DF1809": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackDeleteUserFunction0648D5FB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/DeleteUserFunction/SecurityGroup/Resource"
   }
  },
  "DeleteUserFunctionF8A542EC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "12d7f1eb394d52de77e1961940b6245616321a7223432b8195a74dde9d159008.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "DeleteUserFunctionSecurityGroup59DF1809",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/DeleteUserFunction/Resource",
    "aws:asset:path": "asset.12d7f1eb394d52de77e1961940b6245616321a7223432b8195a74dde9d159008",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetPresignUrlForUplodingProfileImageSecurityGroupB0759402": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackGetPresignUrlForUplodingProfileImageAF8CF15D",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingProfileImage/SecurityGroup/Resource"
   }
  },
  "GetPresignUrlForUplodingProfileImageA0888C75": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "bf92ac1b08790a0ef378740bd8c17fded76fd7b796141ce5b3cd3b51c43e0662.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "GetPresignUrlForUplodingProfileImageSecurityGroupB0759402",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingProfileImage/Resource",
    "aws:asset:path": "asset.bf92ac1b08790a0ef378740bd8c17fded76fd7b796141ce5b3cd3b51c43e0662",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetPresignUrlForUplodingPostImageSecurityGroup3B8E0C37": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackGetPresignUrlForUplodingPostImage3746C0B6",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingPostImage/SecurityGroup/Resource"
   }
  },
  "GetPresignUrlForUplodingPostImageC1B733B4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "76e1b851d287ef36d598463179121b74a60050add78942d2f124adc05baff250.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "PostsStorage00A69DB4"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "GetPresignUrlForUplodingPostImageSecurityGroup3B8E0C37",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/GetPresignUrlForUplodingPostImage/Resource",
    "aws:asset:path": "asset.76e1b851d287ef36d598463179121b74a60050add78942d2f124adc05baff250",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "UpdateProfilePictureFunctionSecurityGroupE88B9621": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function SocialNetworkCdkStackUpdateProfilePictureFunction77137028",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": "vpc-05fc44f3c7d685edb"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/UpdateProfilePictureFunction/SecurityGroup/Resource"
   }
  },
  "UpdateProfilePictureFunction78295F9B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "dae2820c432b0c58ef3702dab036e794ed19a2fa9ef0171daec76b55df03c84f.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "Users0A0EEA89"
      },
      "IMAGE_BUCKET_NAME": {
       "Ref": "ImageStorage82E68681"
      }
     }
    },
    "Handler": "index.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x",
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "UpdateProfilePictureFunctionSecurityGroupE88B9621",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      "subnet-0c2283da7ffab1df2",
      "subnet-0cff5a0113ea24898"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/UpdateProfilePictureFunction/Resource",
    "aws:asset:path": "asset.dae2820c432b0c58ef3702dab036e794ed19a2fa9ef0171daec76b55df03c84f",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "TextractFunction6DF7C8EE": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-361602391862-us-east-1",
     "S3Key": "2bc78a1022fbe15d9283a1e4bf1e9f60486794d49d1797c046ff76049a95d64e.zip"
    },
    "Environment": {
     "Variables": {
      "BUCKET_NAME": {
       "Ref": "PostsStorage00A69DB4"
      },
      "OUTPUT_QUEUE_URL": {
       "Ref": "TextractResultQueue3C564822"
      }
     }
    },
    "Handler": "textract.handler",
    "Role": "arn:aws:iam::361602391862:role/LabRole",
    "Runtime": "nodejs20.x"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/TextractFunction/Resource",
    "aws:asset:path": "asset.2bc78a1022fbe15d9283a1e4bf1e9f60486794d49d1797c046ff76049a95d64e",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "TextractFunctionSqsEventSourceSocialNetworkCdkStackImageUploadQueueD2C5024A58297646": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "EventSourceArn": {
     "Fn::GetAtt": [
      "ImageUploadQueue828B2CCD",
      "Arn"
     ]
    },
    "FunctionName": {
     "Ref": "TextractFunction6DF7C8EE"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/TextractFunction/SqsEventSource:SocialNetworkCdkStackImageUploadQueueD2C5024A/Resource"
   }
  },
  "SocialNetworkApiACB67AB1": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Name": "Social Network Service"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Resource"
   }
  },
  "SocialNetworkApiDeploymentA74B3F222ece8e00d9fbf4060331eaebd605127f": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Automatically created by the RestApi construct",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "DependsOn": [
    "SocialNetworkApideleteUserDELETE3193D5E6",
    "SocialNetworkApideleteUserCFD79263",
    "SocialNetworkApigetPresignUrlForUplodingPostImageGET97DC1964",
    "SocialNetworkApigetPresignUrlForUplodingPostImageD0895DD3",
    "SocialNetworkApigetPresignUrlForUplodingProfileImageGET263376DB",
    "SocialNetworkApigetPresignUrlForUplodingProfileImageECBD9743",
    "SocialNetworkApigetUserGETEF6541CD",
    "SocialNetworkApigetUser1CD8563F",
    "SocialNetworkApiregistrationPOST127123FF",
    "SocialNetworkApiregistration36768A6D"
   ],
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Deployment/Resource"
   }
  },
  "SocialNetworkApiDeploymentStageprod4C6E8575": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "SocialNetworkApiDeploymentA74B3F222ece8e00d9fbf4060331eaebd605127f"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/DeploymentStage.prod/Resource"
   }
  },
  "SocialNetworkApiregistration36768A6D": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "registration",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/Resource"
   }
  },
  "SocialNetworkApiregistrationPOSTApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9POSTregistration1B009A35": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RegistrationFunction288DEDD6",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/POST/registration"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/POST/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.POST..registration"
   }
  },
  "SocialNetworkApiregistrationPOSTApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9POSTregistration7F04FAE1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RegistrationFunction288DEDD6",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/POST/registration"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/POST/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.POST..registration"
   }
  },
  "SocialNetworkApiregistrationPOST127123FF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "RegistrationFunction288DEDD6",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApiregistration36768A6D"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/registration/POST/Resource"
   }
  },
  "SocialNetworkApigetUser1CD8563F": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "getUser",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/Resource"
   }
  },
  "SocialNetworkApigetUserGETApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetUser0B73CDFA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetUserFunctionD3D353B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/GET/getUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/GET/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getUser"
   }
  },
  "SocialNetworkApigetUserGETApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetUser3AFBE9FB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetUserFunctionD3D353B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/GET/getUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/GET/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getUser"
   }
  },
  "SocialNetworkApigetUserGETEF6541CD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetUserFunctionD3D353B4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApigetUser1CD8563F"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getUser/GET/Resource"
   }
  },
  "SocialNetworkApideleteUserCFD79263": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "deleteUser",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/Resource"
   }
  },
  "SocialNetworkApideleteUserDELETEApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9DELETEdeleteUser4FEA608B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserFunctionF8A542EC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/DELETE/deleteUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/DELETE/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.DELETE..deleteUser"
   }
  },
  "SocialNetworkApideleteUserDELETEApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9DELETEdeleteUser56021C79": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DeleteUserFunctionF8A542EC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/DELETE/deleteUser"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/DELETE/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.DELETE..deleteUser"
   }
  },
  "SocialNetworkApideleteUserDELETE3193D5E6": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DeleteUserFunctionF8A542EC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApideleteUserCFD79263"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/deleteUser/DELETE/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageECBD9743": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "getPresignUrlForUplodingProfileImage",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageGETApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingProfileImage62CB0C98": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingProfileImageA0888C75",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/GET/getPresignUrlForUplodingProfileImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/GET/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingProfileImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageGETApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingProfileImage6D55DC21": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingProfileImageA0888C75",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/GET/getPresignUrlForUplodingProfileImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/GET/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingProfileImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingProfileImageGET263376DB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetPresignUrlForUplodingProfileImageA0888C75",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApigetPresignUrlForUplodingProfileImageECBD9743"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingProfileImage/GET/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageD0895DD3": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "SocialNetworkApiACB67AB1",
      "RootResourceId"
     ]
    },
    "PathPart": "getPresignUrlForUplodingPostImage",
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/Resource"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageGETApiPermissionSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingPostImage793BC119": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingPostImageC1B733B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/",
       {
        "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
       },
       "/GET/getPresignUrlForUplodingPostImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/GET/ApiPermission.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingPostImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageGETApiPermissionTestSocialNetworkCdkStackSocialNetworkApiAC936AE9GETgetPresignUrlForUplodingPostImage85BD1A3D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetPresignUrlForUplodingPostImageC1B733B4",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-1:361602391862:",
       {
        "Ref": "SocialNetworkApiACB67AB1"
       },
       "/test-invoke-stage/GET/getPresignUrlForUplodingPostImage"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/GET/ApiPermission.Test.SocialNetworkCdkStackSocialNetworkApiAC936AE9.GET..getPresignUrlForUplodingPostImage"
   }
  },
  "SocialNetworkApigetPresignUrlForUplodingPostImageGET97DC1964": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetPresignUrlForUplodingPostImageC1B733B4",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "SocialNetworkApigetPresignUrlForUplodingPostImageD0895DD3"
    },
    "RestApiId": {
     "Ref": "SocialNetworkApiACB67AB1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/SocialNetworkApi/Default/getPresignUrlForUplodingPostImage/GET/Resource"
   }
  },
  "S3SendMessagePolicy": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Version": "2012-10-17",
     "Id": {
      "Fn::Join": [
       "",
       [
        {
         "Fn::GetAtt": [
          "ImageUploadQueue828B2CCD",
          "Arn"
         ]
        },
        "/SQSDefaultPolicy"
       ]
      ]
     },
     "Statement": [
      {
       "Sid": "example-statement-ID",
       "Effect": "Allow",
       "Principal": {
        "AWS": "*"
       },
       "Action": "SQS:SendMessage",
       "Resource": {
        "Fn::GetAtt": [
         "ImageUploadQueue828B2CCD",
         "Arn"
        ]
       },
       "Condition": {
        "ArnLike": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "PostsStorage00A69DB4",
           "Arn"
          ]
         }
        }
       }
      }
     ]
    },
    "Queues": [
     {
      "Ref": "ImageUploadQueue828B2CCD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/S3SendMessagePolicy"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/22Ry27CMBBFv6V74wJ97IFS1AUtJd2jiTNQQ2KnmTEosvLvle3wqNTVnHvHHs1jLEePz3J4BycaqOIwKHUufcagDmKNZF2jUMCJNh7VWPrZ1szfVmK2Ne/AC2A8QRvU2jrGL8hLvKgAmcsN8jU5IbJKA2trRIbKNZrbRWNdHR/fGp0oWgOVLXLpL3UjdIIepJ86dUAOZk8prGypVXu1e53EFCj8/iHpPx26WPIvpOedKKHKC5D+1RkVm51tzYXnRzScxc0soa612YX0/+4Km0oTaWtC2xsgQiY5CUFArXdpg9KvkXhS67i8Hl+wLm1boYlT3qiMYZe2G+F8pTDd9WSpUOIl8rctgpWo6wJ/OK4di9hLqNR3fP7VCWMLlHu6P46HcvQkR3d70nrQOMO6QrlO8RcvEvBdPwIAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "SocialNetworkCdkStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ImageStorageOutput": {
   "Value": {
    "Ref": "ImageStorage82E68681"
   }
  },
  "PostsStorageOutput": {
   "Value": {
    "Ref": "PostsStorage00A69DB4"
   }
  },
  "SocialNetworkApiEndpointE7682DC6": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "SocialNetworkApiACB67AB1"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
      },
      "/"
     ]
    ]
   }
  },
  "ApiUrl": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "SocialNetworkApiACB67AB1"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "SocialNetworkApiDeploymentStageprod4C6E8575"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "SocialNetworkApiUrl"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}